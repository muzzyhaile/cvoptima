@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;700;900&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* BRUTALIST DESIGN SYSTEM - Raw, Bold, Industrial */

@layer base {
  :root {
    /* Core Brutalist Color Palette - Improved Contrast */
    --background: 0 0% 5%;          /* Deep black background */
    --foreground: 0 0% 98%;         /* Pure white text */

    --card: 0 0% 10%;               /* Dark cards with better contrast */
    --card-foreground: 0 0% 98%;    /* White text on cards */

    --popover: 0 0% 8%;
    --popover-foreground: 0 0% 98%;

    /* Brutalist Primary - High Contrast Yellow */
    --primary: 60 100% 65%;         /* Even brighter yellow for buttons */
    --primary-foreground: 0 0% 0%;  /* Pure black text on yellow */

    /* Secondary - Pure White */
    --secondary: 0 0% 95%;
    --secondary-foreground: 0 0% 0%;

    /* Button specific colors for better contrast */
    --button-primary: 60 100% 70%;     /* Bright yellow for buttons */
    --button-primary-text: 0 0% 0%;    /* Black text on yellow buttons */
    --button-secondary: 0 0% 90%;      /* Light grey for secondary buttons */
    --button-secondary-text: 0 0% 0%;  /* Black text on secondary buttons */
    --button-outline: 0 0% 98%;        /* White outline buttons */
    --button-outline-text: 0 0% 98%;   /* White text on outline buttons */

    /* Muted - Better contrast greys */
    --muted: 0 0% 15%;
    --muted-foreground: 0 0% 85%;   /* Much lighter for readability */

    /* Accent - Sharp Red with better contrast */
    --accent: 0 90% 60%;            /* Lighter red for visibility */
    --accent-foreground: 0 0% 98%;  /* White text on red */

    /* Error/Warning - High contrast colors */
    --destructive: 0 100% 60%;      /* Lighter red for readability */
    --destructive-foreground: 0 0% 98%;

    /* Border - High contrast white */
    --border: 0 0% 98%;             /* Pure white borders */
    --input: 0 0% 12%;              /* Darker inputs with white text */
    --ring: 60 100% 60%;            /* Brighter yellow focus ring */

    /* Success/Warning - Better contrast */
    --success: 120 60% 50%;         /* Brighter green */
    --success-foreground: 0 0% 98%;

    --warning: 30 100% 60%;         /* Brighter orange */
    --warning-foreground: 0 0% 0%;  /* Black text on orange */

    /* Harsh shadows with better visibility */
    --shadow-brutal: 6px 6px 0px hsl(0 0% 98%);
    --shadow-inset: inset 3px 3px 0px hsl(0 0% 0%);

    /* Sharp corners */
    --radius: 0px;

    --sidebar-background: 0 0% 8%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 60 100% 60%;
    --sidebar-primary-foreground: 0 0% 0%;
    --sidebar-accent: 0 0% 12%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 98%;
    --sidebar-ring: 60 100% 60%;
  }

  .dark {
    /* Improved dark mode - Same high contrast values */
    --background: 0 0% 5%;
    --foreground: 0 0% 98%;
    --card: 0 0% 10%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 8%;
    --popover-foreground: 0 0% 98%;
    --primary: 60 100% 60%;
    --primary-foreground: 0 0% 0%;
    --secondary: 0 0% 98%;
    --secondary-foreground: 0 0% 0%;
    --muted: 0 0% 15%;
    --muted-foreground: 0 0% 85%;
    --accent: 0 90% 60%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 100% 60%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 98%;
    --input: 0 0% 12%;
    --ring: 60 100% 60%;
    --sidebar-background: 0 0% 8%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 60 100% 60%;
    --sidebar-primary-foreground: 0 0% 0%;
    --sidebar-accent: 0 0% 12%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 98%;
    --sidebar-ring: 60 100% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', sans-serif;
    font-weight: 400;
  }

  /* NUCLEAR OPTION: Force selection visibility with absolute highest priority */
  * {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    user-select: text !important;
  }

  *::selection,
  *::-moz-selection {
    background: #facc15 !important;
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
    outline: none !important;
    -webkit-text-fill-color: #000000 !important;
    -webkit-text-stroke: none !important;
  }

  /* Override any possible framework conflicts */
  html, body, div, span, h1, h2, h3, h4, h5, h6, p, a, strong, em {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    user-select: text !important;
  }

  html ::selection,
  body ::selection,
  div ::selection,
  span ::selection,
  h1 ::selection,
  h2 ::selection,
  h3 ::selection,
  h4 ::selection,
  h5 ::selection,
  h6 ::selection,
  p ::selection,
  a ::selection {
    background: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
    -webkit-text-fill-color: #000000 !important;
  }

  html ::-moz-selection,
  body ::-moz-selection,
  div ::-moz-selection,
  span ::-moz-selection,
  h1 ::-moz-selection,
  h2 ::-moz-selection,
  h3 ::-moz-selection,
  h4 ::-moz-selection,
  h5 ::-moz-selection,
  h6 ::-moz-selection,
  p ::-moz-selection,
  a ::-moz-selection {
    background: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
  }

  /* Brutalist Typography */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    letter-spacing: -0.02em;
    line-height: 1.1;
    text-transform: uppercase;
  }

  code, pre {
    font-family: 'JetBrains Mono', monospace;
  }

  /* Remove all smooth transitions - Brutalism is immediate */
  *, *::before, *::after {
    transition: none !important;
  }
}

@layer utilities {
  .shadow-brutal {
    box-shadow: var(--shadow-brutal);
  }

  .shadow-inset {
    box-shadow: var(--shadow-inset);
  }

  /* Brutalist text styles with high contrast */
  .text-brutal {
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: -0.01em;
    color: hsl(var(--foreground));
  }

  .text-mono {
    font-family: 'JetBrains Mono', monospace;
    color: hsl(var(--foreground));
  }

  /* High contrast text utilities */
  .text-high-contrast {
    color: hsl(0 0% 98%) !important;
    text-shadow: 1px 1px 0px hsl(0 0% 0%);
  }

  .text-on-primary {
    color: hsl(0 0% 0%) !important;
    font-weight: 700;
  }

  .text-on-dark {
    color: hsl(0 0% 98%) !important;
    font-weight: 500;
  }

  /* Button text visibility */
  .btn-text-visible {
    color: hsl(0 0% 0%) !important;
    font-weight: 700 !important;
  }

  /* Brutalist grid system */
  .grid-brutal {
    display: grid;
    gap: 4px;
    border: 4px solid hsl(var(--border));
  }

  /* High contrast focus states */
  .focus-brutal:focus {
    outline: 4px solid hsl(var(--primary));
    outline-offset: 4px;
  }

  /* Button specific styling */
  .btn-primary-brutal {
    background-color: #facc15 !important; /* Bright yellow */
    color: #000000 !important;            /* Pure black text */
    border: 4px solid #000000 !important; /* Black border */
    font-weight: 900 !important;
  }

  .btn-outline-brutal {
    background-color: transparent !important;
    color: #ffffff !important;            /* White text */
    border: 4px solid #ffffff !important; /* White border */
    font-weight: 900 !important;
  }

  /* Ensure readability on all backgrounds */
  .readable-on-card {
    color: hsl(0 0% 98%) !important;
  }

  .readable-on-muted {
    color: hsl(0 0% 98%) !important;
  }

  /* Force high contrast selection on feature cards */
  .feature-card *::selection {
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
  }

  .feature-card *::-moz-selection {
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
  }

  /* Ensure muted text is also readable when selected - Maximum specificity */
  .text-muted-foreground::selection,
  [class*="text-muted"]::selection,
  .font-mono::selection,
  .text-sm::selection,
  .uppercase::selection,
  .tracking-wide::selection,
  p.text-muted-foreground::selection,
  p.font-mono::selection {
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
    outline: none !important;
  }

  .text-muted-foreground::-moz-selection,
  [class*="text-muted"]::-moz-selection,
  .font-mono::-moz-selection,
  .text-sm::-moz-selection,
  .uppercase::-moz-selection,
  .tracking-wide::-moz-selection,
  p.text-muted-foreground::-moz-selection,
  p.font-mono::-moz-selection {
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
    outline: none !important;
  }

  /* Override any Tailwind CSS selection styles */
  .text-muted-foreground.font-mono.text-sm.uppercase.tracking-wide::selection {
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
    outline: none !important;
  }

  .text-muted-foreground.font-mono.text-sm.uppercase.tracking-wide::-moz-selection {
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
    outline: none !important;
  }

  /* Force selection styles on the specific feature card text - Nuclear option */
  .feature-card p::selection,
  .feature-card .text-muted-foreground::selection,
  [data-lov-name="p"]::selection,
  [class*="text-muted-foreground"]::selection {
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
    outline: none !important;
    -webkit-text-fill-color: #000000 !important;
  }

  .feature-card p::-moz-selection,
  .feature-card .text-muted-foreground::-moz-selection,
  [data-lov-name="p"]::-moz-selection,
  [class*="text-muted-foreground"]::-moz-selection {
    background-color: #facc15 !important;
    color: #000000 !important;
    text-shadow: none !important;
    outline: none !important;
  }

  /* CV Preview Optimization Styles */
  .docx-preview {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: auto !important;
  }

  .docx-preview > * {
    max-width: 100% !important;
    width: 100% !important;
  }

  /* Ensure Word document content uses full width */
  .docx-preview .docx-wrapper,
  .docx-preview .docx-document,
  .docx-preview .docx-section,
  .docx-preview .docx-page {
    width: 100% !important;
    max-width: 100% !important;
  }

  /* CV Text content optimization */
  .cv-preview-content,
  .original-text-preview {
    width: 100% !important;
    max-width: 100% !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
  }

  /* Responsive grid adjustments for CV comparison */
  @media (max-width: 1024px) {
    .cv-comparison-grid {
      grid-template-columns: 1fr !important;
      gap: 1rem !important;
    }
    
    .cv-comparison-grid .recommendations-panel {
      order: 2;
    }
    
    .cv-comparison-grid .cv-preview-panel {
      order: 1;
    }
  }

  /* Optimize for ultra-wide screens */
  @media (min-width: 1920px) {
    .cv-comparison-grid {
      gap: 2rem !important;
    }
    
    .cv-preview-panel .bg-white {
      padding: 2rem !important;
    }
  }

  /* Enhanced scrollbar styling for CV preview */
  .cv-preview-panel::-webkit-scrollbar,
  .docx-preview::-webkit-scrollbar {
    width: 8px;
  }

  .cv-preview-panel::-webkit-scrollbar-track,
  .docx-preview::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }

  .cv-preview-panel::-webkit-scrollbar-thumb,
  .docx-preview::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
  }

  .cv-preview-panel::-webkit-scrollbar-thumb:hover,
  .docx-preview::-webkit-scrollbar-thumb:hover {
    background: #a1a1a1;
  }

  /* AI Highlight overlays inside CV preview */
  .ai-highlight {
    background: rgba(250, 204, 21, 0.25); /* amber-400 @ 25% */
    outline: 1px dashed rgba(250, 204, 21, 0.7);
    border-radius: 3px;
    cursor: pointer;
    transition: box-shadow 0.1s ease, background 0.1s ease, outline-color 0.1s ease;
  }
  .ai-highlight:hover {
    background: rgba(250, 204, 21, 0.4);
    outline-color: rgba(250, 204, 21, 1);
    box-shadow: 0 0 0 2px rgba(250, 204, 21, 0.25);
  }
  .ai-highlight[data-active="true"] {
    background: rgba(34, 197, 94, 0.30); /* green-500 @ 30% for applied */
    outline: 1px solid rgba(34, 197, 94, 0.9);
  }
  .ai-highlight[data-active="true"]:hover {
    background: rgba(34, 197, 94, 0.45);
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.25);
  }
  .ai-highlight:focus {
    outline: 2px solid #facc15;
    outline-offset: 1px;
  }

  /* Make highlighted spans inline-block to improve click target while preserving flow */
  .ai-highlight { display: inline; padding: 0 2px; }

  /* Ensure highlights are visible within prose constraints */
  .prose .ai-highlight { max-width: 100%; }

  /* === Professional A4 CV sheet for PDF/export === */
  .cv-pdf-sheet {
    width: 210mm;               /* A4 width */
    min-height: 297mm;          /* A4 height */
    padding: 18mm 18mm 20mm;    /* inner margins */
    background: #ffffff;        /* pure white */
    color: #222222;             /* readable text */
    margin: 0 auto;             /* center on screen */
    border-radius: 4px;         /* subtle rounding for screen */
  }

  @media screen {
    .cv-pdf-sheet {
      box-shadow: 0 6px 24px rgba(0,0,0,0.08), 0 2px 8px rgba(0,0,0,0.06);
    }
  }

  .cv-typography {
    font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
    line-height: 1.5;
    letter-spacing: 0.1px;
  }

  .cv-typography h1,
  .cv-typography h2,
  .cv-typography h3 {
    color: #111827;             /* gray-900 */
    margin: 0 0 8px;
  }

  .cv-typography h1 { font-size: 22pt; font-weight: 800; letter-spacing: -0.3px; }
  .cv-typography h2 { font-size: 14pt; font-weight: 700; margin-top: 14pt; border-bottom: 1px solid #e5e7eb; padding-bottom: 4pt; }
  .cv-typography h3 { font-size: 11pt; font-weight: 700; }

  .cv-typography p { font-size: 10pt; margin: 0 0 6pt; }
  .cv-typography ul { margin: 6pt 0 8pt 18pt; }
  .cv-typography li { margin: 0 0 4pt; font-size: 10pt; }

  .cv-meta-row { display: grid; grid-template-columns: 1fr auto; gap: 8pt; align-items: baseline; }
  .cv-muted { color: #6b7280; }  /* gray-500 */

  /* Ensure images/tables fit */
  .cv-pdf-sheet * { max-width: 100%; }

  /* Page-break hints for long content when printing */
  .page-break { page-break-after: always; }

  @media print {
    body { background: #ffffff !important; }
    .cv-pdf-sheet { box-shadow: none !important; margin: 0 !important; }
  }

  /* Improve docx preview and CV HTML blocks inside sheet */
  .cv-content-prose {
    /* Tailwind prose-like spacing without plugin */
    font-size: 10pt;
  }
  .cv-content-prose p { margin: 0 0 6pt; }
  .cv-content-prose h1 { font-size: 22pt; margin: 0 0 8pt; }
  .cv-content-prose h2 { font-size: 14pt; margin: 14pt 0 6pt; border-bottom: 1px solid #e5e7eb; padding-bottom: 4pt; }
  .cv-content-prose h3 { font-size: 11pt; margin: 10pt 0 4pt; }
}